<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIåŠ©æ•™è¯„ä¼°ä¸ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .upload-area {
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .result-card {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .path-node {
            transition: all 0.3s ease;
        }
        .path-node:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .progress-bar {
            background: linear-gradient(90deg, #4f46e5 0%, #06b6d4 100%);
        }
        .diagnostic-card {
            background: linear-gradient(135deg, #f6f9fc 0%, #ffffff 100%);
            border: 2px solid transparent;
            background-clip: padding-box;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app">
        <!-- å¤´éƒ¨ -->
        <header class="gradient-bg text-white shadow-lg">
            <div class="container mx-auto px-6 py-8">
                <h1 class="text-4xl font-bold text-center">
                    <i class="fas fa-robot mr-3"></i>AIåŠ©æ•™è¯„ä¼°ä¸ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ç³»ç»Ÿ
                </h1>
                <p class="text-center mt-3 text-lg opacity-90">æ™ºèƒ½è¯„ä¼° + ä¸ªæ€§åŒ–å­¦ä¹  = å› ææ–½æ•™</p>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹ -->
        <main class="container mx-auto px-6 py-12">
            <!-- é€‰é¡¹å¡å¯¼èˆª -->
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">æ™ºèƒ½æ•™å­¦å¹³å°</h2>
                    <p class="text-gray-600 text-lg">é›†æˆAIåŠ©æ•™è¯„ä¼°ä¸ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„æ¨è</p>
                </div>

                <!-- é€‰é¡¹å¡ -->
                <div class="mb-8">
                    <div class="flex border-b overflow-x-auto">
                        <button 
                            @click="activeTab = 'diagnostic'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 whitespace-nowrap', 
                                    activeTab === 'diagnostic' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-user-graduate mr-2"></i>å…¥å­¦è¯Šæ–­
                        </button>
                        <button 
                            @click="activeTab = 'learning-path'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 ml-8 whitespace-nowrap', 
                                    activeTab === 'learning-path' ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-route mr-2"></i>å­¦ä¹ è·¯å¾„
                        </button>
                        <button 
                            @click="activeTab = 'upload'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 ml-8 whitespace-nowrap', 
                                    activeTab === 'upload' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-upload mr-2"></i>ä½œä¸šæäº¤
                        </button>
                        <button 
                            @click="activeTab = 'history'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 ml-8 whitespace-nowrap', 
                                    activeTab === 'history' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-history mr-2"></i>å­¦ä¹ è®°å½•
                        </button>
                    </div>
                </div>

                <!-- å…¥å­¦è¯Šæ–­æ¨¡å¼ -->
                <div v-show="activeTab === 'diagnostic'" class="bg-white rounded-xl card-shadow p-8">
                    <div v-if="!diagnosticStarted && !diagnosticCompleted">
                        <div class="text-center mb-8">
                            <i class="fas fa-brain text-6xl text-purple-500 mb-4"></i>
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">AIè¯¾ç¨‹å…¥å­¦è¯Šæ–­æµ‹è¯•</h3>
                            <p class="text-gray-600 text-lg mb-6">é€šè¿‡è¿™ä¸ªæµ‹è¯•ï¼Œæˆ‘ä»¬å°†äº†è§£ä½ çš„æŠ€æœ¯åŸºç¡€å’Œå­¦ä¹ åå¥½ï¼Œä¸ºä½ æ¨èæœ€é€‚åˆçš„å­¦ä¹ è·¯å¾„</p>
                        </div>
                        
                        <div class="diagnostic-card p-6 rounded-lg mb-6">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">æµ‹è¯•å†…å®¹åŒ…æ‹¬ï¼š</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="flex items-center p-3 bg-blue-50 rounded-lg">
                                    <i class="fas fa-lightbulb text-blue-500 mr-3"></i>
                                    <span>åŸºç¡€æ¦‚å¿µæµ‹è¯• (5åˆ†é’Ÿ)</span>
                                </div>
                                <div class="flex items-center p-3 bg-green-50 rounded-lg">
                                    <i class="fas fa-code text-green-500 mr-3"></i>
                                    <span>ç¼–ç¨‹èƒ½åŠ›æµ‹è¯• (8åˆ†é’Ÿ)</span>
                                </div>
                                <div class="flex items-center p-3 bg-yellow-50 rounded-lg">
                                    <i class="fas fa-tools text-yellow-500 mr-3"></i>
                                    <span>å·¥å…·ç†Ÿæ‚‰åº¦è°ƒæŸ¥ (2åˆ†é’Ÿ)</span>
                                </div>
                                <div class="flex items-center p-3 bg-purple-50 rounded-lg">
                                    <i class="fas fa-heart text-purple-500 mr-3"></i>
                                    <span>å­¦ä¹ åå¥½è°ƒæŸ¥ (2åˆ†é’Ÿ)</span>
                                </div>
                            </div>
                        </div>

                        <form @submit.prevent="startDiagnostic">
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">å­¦ç”ŸID</label>
                                <input 
                                    v-model="diagnosticForm.studentId" 
                                    type="text" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    placeholder="è¯·è¾“å…¥å­¦ç”ŸID">
                            </div>
                            
                            <div class="text-center">
                                <button 
                                    type="submit"
                                    :disabled="loading"
                                    class="bg-gradient-to-r from-purple-500 to-pink-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:from-purple-600 hover:to-pink-700 transition duration-300 disabled:opacity-50">
                                    <span v-if="loading">
                                        <i class="fas fa-spinner fa-spin mr-2"></i>åŠ è½½ä¸­...
                                    </span>
                                    <span v-else>
                                        <i class="fas fa-rocket mr-2"></i>å¼€å§‹è¯Šæ–­æµ‹è¯• (çº¦15åˆ†é’Ÿ)
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- è¯Šæ–­æµ‹è¯•è¿›è¡Œä¸­ -->
                    <div v-else-if="diagnosticStarted && !diagnosticCompleted" class="space-y-6">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">æ­£åœ¨è¿›è¡Œè¯Šæ–­æµ‹è¯•</h3>
                            <p class="text-gray-600">è¯·æ ¹æ®æç¤ºå®Œæˆæµ‹è¯•é¢˜ç›®</p>
                        </div>
                        
                        <!-- è¿™é‡Œå¯ä»¥å±•ç¤ºå®é™…çš„æµ‹è¯•é¢˜ç›® -->
                        <div class="bg-gray-100 p-8 rounded-lg text-center">
                            <i class="fas fa-clipboard-list text-6xl text-gray-400 mb-4"></i>
                            <p class="text-xl text-gray-600 mb-4">æ¨¡æ‹Ÿè¯Šæ–­æµ‹è¯•ç•Œé¢</p>
                            <p class="text-gray-500 mb-6">å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºå…·ä½“çš„æµ‹è¯•é¢˜ç›®</p>
                            <button 
                                @click="completeDiagnostic"
                                class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-check mr-2"></i>å®Œæˆæµ‹è¯• (æ¼”ç¤º)
                            </button>
                        </div>
                    </div>

                    <!-- è¯Šæ–­å®Œæˆ -->
                    <div v-else-if="diagnosticCompleted && studentProfile" class="space-y-6">
                        <div class="text-center mb-6">
                            <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">è¯Šæ–­æµ‹è¯•å®Œæˆï¼</h3>
                            <p class="text-gray-600">å·²ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ ç”»åƒå’Œè·¯å¾„æ¨è</p>
                        </div>

                        <!-- å­¦ä¹ ç”»åƒå±•ç¤º -->
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-user-circle mr-2 text-blue-500"></i>æ‚¨çš„å­¦ä¹ ç”»åƒ
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">å­¦ä¹ æ°´å¹³ï¼š</span>
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">{{ studentProfile.level }}</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">å­¦ä¹ é£æ ¼ï¼š</span>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">{{ getStyleText(studentProfile.learning_style) }}</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">æ—¶é—´é¢„ç®—ï¼š</span>
                                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm">{{ studentProfile.time_budget }}å°æ—¶/å‘¨</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">å…´è¶£é¢†åŸŸï¼š</span>
                                        <div class="mt-1">
                                            <span v-for="interest in studentProfile.interests" :key="interest"
                                                  class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm mr-1">{{ interest }}</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">è–„å¼±æŠ€èƒ½ï¼š</span>
                                        <div class="mt-1">
                                            <span v-for="skill in studentProfile.weak_skills.slice(0, 3)" :key="skill"
                                                  class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm mr-1">{{ skill }}</span>
                                            <span v-if="studentProfile.weak_skills.length > 3" class="text-gray-500 text-sm">
                                                ç­‰{{ studentProfile.weak_skills.length }}é¡¹
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¨èè·¯å¾„ -->
                        <div class="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-route mr-2 text-green-500"></i>æ¨èå­¦ä¹ è·¯å¾„
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">èµ·å§‹é€šé“ï¼š</span>
                                        <span :class="getChannelClass(pathRecommendation.recommended_channel)">
                                            {{ pathRecommendation.recommended_channel }}é€šé“
                                        </span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">é¢„è®¡å®Œæˆæ—¶é—´ï¼š</span>
                                        <span class="text-blue-600 font-medium">{{ pathRecommendation.estimated_timeline.total_weeks }}å‘¨</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">å­¦ä¹ ç­–ç•¥ï¼š</span>
                                        <span class="text-purple-600">{{ pathRecommendation.learning_strategy.style_adaptation.approach }}</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">é‡ç‚¹å…³æ³¨ï¼š</span>
                                        <span class="text-orange-600">{{ pathRecommendation.learning_strategy.interest_priorities.focus_suggestion }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ“ä½œæŒ‰é’® -->
                        <div class="flex justify-center gap-4">
                            <button 
                                @click="viewLearningPath"
                                class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-arrow-right mr-2"></i>æŸ¥çœ‹å­¦ä¹ è·¯å¾„
                            </button>
                            <button 
                                @click="resetDiagnostic"
                                class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-redo mr-2"></i>é‡æ–°æµ‹è¯•
                            </button>
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ è·¯å¾„æ¨¡å¼ -->
                <div v-show="activeTab === 'learning-path'" class="bg-white rounded-xl card-shadow p-8">
                    <div v-if="!studentProgress">
                        <div class="text-center py-12">
                            <i class="fas fa-map-signs text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2">è¿˜æ²¡æœ‰å­¦ä¹ è·¯å¾„</h3>
                            <p class="text-gray-500 mb-6">è¯·å…ˆå®Œæˆå…¥å­¦è¯Šæ–­æµ‹è¯•ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„</p>
                            <button 
                                @click="activeTab = 'diagnostic'"
                                class="bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition">
                                <i class="fas fa-brain mr-2"></i>å¼€å§‹å…¥å­¦è¯Šæ–­
                            </button>
                        </div>
                    </div>
                    
                    <div v-else class="space-y-6">
                        <!-- å­¦ä¹ è¿›åº¦æ¦‚è§ˆ -->
                        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6 rounded-lg">
                            <h3 class="text-2xl font-bold mb-4">
                                <i class="fas fa-chart-line mr-3"></i>å­¦ä¹ è¿›åº¦æ¦‚è§ˆ
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ studentProgress.completion_rate }}%</div>
                                    <div class="text-sm opacity-90">å®Œæˆè¿›åº¦</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ studentProgress.completed_nodes.length }}/7</div>
                                    <div class="text-sm opacity-90">å®ŒæˆèŠ‚ç‚¹</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ studentProgress.current_channel }}</div>
                                    <div class="text-sm opacity-90">å½“å‰é€šé“</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ Math.round(studentProgress.total_study_hours) }}h</div>
                                    <div class="text-sm opacity-90">å­¦ä¹ æ—¶é•¿</div>
                                </div>
                            </div>
                            
                            <!-- è¿›åº¦æ¡ -->
                            <div class="mt-4">
                                <div class="w-full bg-white bg-opacity-20 rounded-full h-3">
                                    <div class="progress-bar h-3 rounded-full" :style="{width: studentProgress.completion_rate + '%'}"></div>
                                </div>
                            </div>
                        </div>

                        <!-- å½“å‰ä»»åŠ¡ -->
                        <div v-if="currentTask" class="bg-yellow-50 border border-yellow-200 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-tasks mr-2 text-yellow-600"></i>å½“å‰ä»»åŠ¡
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h5 class="font-semibold text-gray-700 mb-2">{{ currentTask.node_name }}</h5>
                                    <p class="text-gray-600 mb-3">{{ currentTask.task_description }}</p>
                                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                                        <span><i class="fas fa-layer-group mr-1"></i>{{ currentTask.channel }}é€šé“</span>
                                        <span><i class="fas fa-clock mr-1"></i>{{ currentTask.estimated_hours }}å°æ—¶</span>
                                        <span><i class="fas fa-signal mr-1"></i>éš¾åº¦{{ currentTask.difficulty_level }}/10</span>
                                    </div>
                                </div>
                                <div>
                                    <h6 class="font-semibold text-gray-700 mb-2">ä»»åŠ¡è¦æ±‚ï¼š</h6>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li v-for="req in currentTask.requirements" :key="req" class="flex items-start">
                                            <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5 text-xs"></i>
                                            {{ req }}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- å­¦ä¹ èŠ‚ç‚¹è·¯å¾„ -->
                        <div class="space-y-4">
                            <h4 class="text-xl font-semibold text-gray-800">
                                <i class="fas fa-road mr-2 text-blue-500"></i>å­¦ä¹ è·¯å¾„èŠ‚ç‚¹
                            </h4>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div v-for="(node, index) in learningNodes" :key="node.id" 
                                     class="path-node p-4 rounded-lg border-2" 
                                     :class="getNodeClass(node, index)">
                                    <div class="flex items-center justify-between mb-3">
                                        <div class="flex items-center">
                                            <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold"
                                                 :class="getNodeIconClass(node, index)">
                                                {{ index + 1 }}
                                            </div>
                                            <h5 class="font-semibold text-gray-800 ml-3">{{ node.name }}</h5>
                                        </div>
                                        <i :class="getNodeStatusIcon(node)" class="text-lg"></i>
                                    </div>
                                    
                                    <p class="text-gray-600 text-sm mb-3 line-clamp-2">{{ node.description }}</p>
                                    
                                    <div class="flex items-center justify-between text-xs text-gray-500">
                                        <span><i class="fas fa-layer-group mr-1"></i>ABCé€šé“</span>
                                        <span><i class="fas fa-clock mr-1"></i>{{ getEstimatedHours(node) }}h</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æœ€æ–°æ¨è -->
                        <div v-if="latestRecommendation" class="bg-blue-50 border border-blue-200 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-lightbulb mr-2 text-blue-600"></i>æœ€æ–°è·¯å¾„å»ºè®®
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">æ¨èå†³ç­–ï¼š</span>
                                        <span :class="getDecisionClass(latestRecommendation.decision_type)">
                                            {{ getDecisionText(latestRecommendation.decision_type) }}
                                        </span>
                                    </div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">æ¨èé€šé“ï¼š</span>
                                        <span :class="getChannelClass(latestRecommendation.recommended_channel)">
                                            {{ latestRecommendation.recommended_channel }}é€šé“
                                        </span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">æ¨èç†ç”±ï¼š</span>
                                        <p class="text-gray-600 text-sm">{{ latestRecommendation.reasoning }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ä½œä¸šæäº¤æ¨¡å¼ (ä¿æŒåŸæœ‰åŠŸèƒ½) -->
                <div v-show="activeTab === 'upload'" class="bg-white rounded-xl card-shadow p-8">
                    <form @submit.prevent="submitAssignment" enctype="multipart/form-data">
                        <div class="space-y-6">
                            <!-- å­¦ç”Ÿä¿¡æ¯ -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">å­¦ç”ŸID</label>
                                <input 
                                    v-model="uploadForm.studentId" 
                                    type="text" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="è¯·è¾“å…¥å­¦ç”ŸID">
                            </div>

                            <!-- é¡¹ç›®åˆ›æ„ -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">é¡¹ç›®åˆ›æ„æè¿°</label>
                                <textarea 
                                    v-model="uploadForm.ideaText" 
                                    rows="6" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„é¡¹ç›®åˆ›æ„ã€ç›®æ ‡ç”¨æˆ·ã€æ ¸å¿ƒåŠŸèƒ½ç­‰..."></textarea>
                            </div>

                            <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ä¸Šä¼ é¡¹ç›®æ–‡ä»¶</label>
                                <div 
                                    @dragover.prevent
                                    @drop.prevent="handleFileDrop"
                                    class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-12 text-center cursor-pointer"
                                    :class="{'border-blue-500 bg-blue-50': isDragging}"
                                    @dragenter="isDragging = true"
                                    @dragleave="isDragging = false">
                                    
                                    <div v-if="selectedFiles.length === 0">
                                        <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                                        <p class="text-xl text-gray-600 mb-2">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©</p>
                                        <p class="text-gray-500">æ”¯æŒ .zip, .tar.gz å‹ç¼©åŒ…æˆ–å•ä¸ªä»£ç æ–‡ä»¶</p>
                                        <input 
                                            ref="fileInput"
                                            @change="handleFileSelect"
                                            type="file" 
                                            multiple 
                                            class="hidden"
                                            accept=".py,.js,.ts,.tsx,.jsx,.java,.cpp,.c,.zip,.tar.gz">
                                        <button 
                                            type="button"
                                            @click="$refs.fileInput.click()"
                                            class="mt-4 bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition">
                                            é€‰æ‹©æ–‡ä»¶
                                        </button>
                                    </div>
                                    
                                    <div v-else>
                                        <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                                        <p class="text-xl text-green-600 mb-4">å·²é€‰æ‹© {{ selectedFiles.length }} ä¸ªæ–‡ä»¶</p>
                                        <div class="text-left bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto">
                                            <div v-for="file in selectedFiles" :key="file.name" class="flex items-center justify-between py-1">
                                                <span class="text-sm text-gray-700">{{ file.name }}</span>
                                                <span class="text-xs text-gray-500">{{ formatFileSize(file.size) }}</span>
                                            </div>
                                        </div>
                                        <button 
                                            type="button"
                                            @click="clearFiles"
                                            class="mt-4 text-red-500 hover:text-red-600">
                                            <i class="fas fa-times mr-1"></i>æ¸…é™¤æ–‡ä»¶
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- æäº¤æŒ‰é’® -->
                            <button 
                                type="submit"
                                :disabled="loading || selectedFiles.length === 0"
                                class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-8 rounded-lg font-semibold text-lg
                                       hover:from-blue-600 hover:to-purple-700 transition duration-300 disabled:opacity-50">
                                <span v-if="loading">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>è¯„ä¼°ä¸­...
                                </span>
                                <span v-else>
                                    <i class="fas fa-rocket mr-2"></i>æäº¤ä½œä¸šè¯„ä¼°
                                </span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- å­¦ä¹ è®°å½•æ¨¡å¼ -->
                <div v-show="activeTab === 'history'" class="bg-white rounded-xl card-shadow p-8">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-history mr-2 text-orange-500"></i>å­¦ä¹ è®°å½•ä¸è¯„ä¼°å†å²
                        </h3>
                        
                        <!-- ç­›é€‰å™¨ -->
                        <div class="flex flex-wrap gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">å­¦ç”ŸIDç­›é€‰</label>
                                <input 
                                    v-model="historyFilter.studentId" 
                                    type="text" 
                                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                    placeholder="è¾“å…¥å­¦ç”ŸIDç­›é€‰">
                            </div>
                            <div class="flex items-end">
                                <button 
                                    @click="loadHistory"
                                    :disabled="historyLoading"
                                    class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition disabled:opacity-50">
                                    <i class="fas fa-search mr-2" :class="{'fa-spin': historyLoading}"></i>
                                    {{ historyLoading ? 'åŠ è½½ä¸­...' : 'æŸ¥è¯¢' }}
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- å†å²è®°å½•åˆ—è¡¨ -->
                    <div v-if="historyData.length > 0">
                        <div class="space-y-4 max-h-96 overflow-y-auto">
                            <div 
                                v-for="record in filteredHistory" 
                                :key="record.assessment_id"
                                class="border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition"
                                @click="viewHistoryDetail(record)">
                                
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="flex items-center mb-2">
                                            <h4 class="font-semibold text-gray-800">{{ record.student_id }}</h4>
                                            <span 
                                                :class="getStatusBadgeClass(record.status)"
                                                class="ml-3 px-2 py-1 rounded-full text-xs font-medium">
                                                {{ getStatusText(record.status) }}
                                            </span>
                                            <span v-if="record.overall_score" class="ml-2 text-sm text-gray-600">
                                                åˆ†æ•°: {{ record.overall_score.toFixed(1) }}
                                            </span>
                                        </div>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <i class="fas fa-clock mr-1"></i>
                                            <span>{{ formatDateTime(record.created_at) }}</span>
                                        </div>
                                    </div>
                                    <div class="ml-4">
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç©ºçŠ¶æ€ -->
                    <div v-else-if="!historyLoading" class="text-center py-12">
                        <i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i>
                        <p class="text-xl text-gray-500 mb-2">æš‚æ— å­¦ä¹ è®°å½•</p>
                        <p class="text-gray-400">è¯·å…ˆå®Œæˆå…¥å­¦è¯Šæ–­æˆ–æäº¤ä½œä¸š</p>
                    </div>
                </div>
            </div>

            <!-- è¯„ä¼°ç»“æœæ˜¾ç¤º (é›†æˆè·¯å¾„æ¨è) -->
            <div v-if="assessmentResult" class="max-w-6xl mx-auto mt-16">
                <div class="result-card bg-white rounded-xl card-shadow overflow-hidden">
                    <!-- ç»“æœå¤´éƒ¨ -->
                    <div class="bg-gradient-to-r from-green-500 to-blue-600 text-white p-6">
                        <h3 class="text-2xl font-bold mb-2">
                            <i class="fas fa-check-circle mr-3"></i>ä½œä¸šè¯„ä¼°å®Œæˆ
                        </h3>
                        <p class="opacity-90">è¯„ä¼°ID: {{ assessmentResult.assessment_id }}</p>
                    </div>

                    <div class="p-8">
                        <!-- è¯„åˆ†æ¦‚è§ˆ -->
                        <div v-if="assessmentResult.overall_score" class="mb-8">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">è¯„ä¼°ç»“æœ</h4>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <div class="text-center bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600">{{ assessmentResult.overall_score.toFixed(1) }}</div>
                                    <div class="text-gray-600 font-semibold">æ€»åˆ†</div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-purple-600">{{ assessmentResult.breakdown?.idea || 0 }}</div>
                                    <div class="text-gray-600 font-semibold">åˆ›æ„</div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">{{ assessmentResult.breakdown?.ui || 0 }}</div>
                                    <div class="text-gray-600 font-semibold">UI</div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-orange-600">{{ assessmentResult.breakdown?.code || 0 }}</div>
                                    <div class="text-gray-600 font-semibold">ä»£ç </div>
                                </div>
                            </div>
                        </div>

                        <!-- ğŸ†• è·¯å¾„æ¨èç»“æœ -->
                        <div v-if="assessmentResult.path_recommendation" class="mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border border-indigo-200">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">
                                <i class="fas fa-route mr-2 text-indigo-600"></i>æ™ºèƒ½è·¯å¾„æ¨è
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">æ¨èå†³ç­–ï¼š</span>
                                        <span :class="getDecisionClass(assessmentResult.path_recommendation.decision_type)">
                                            {{ getDecisionText(assessmentResult.path_recommendation.decision_type) }}
                                        </span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">æ¨èé€šé“ï¼š</span>
                                        <span :class="getChannelClass(assessmentResult.path_recommendation.channel)">
                                            {{ assessmentResult.path_recommendation.channel }}é€šé“
                                        </span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">ä¸‹ä¸€èŠ‚ç‚¹ï¼š</span>
                                        <span class="text-blue-600 font-medium">{{ getNodeName(assessmentResult.path_recommendation.next_node_id) }}</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">æ¨èç†ç”±ï¼š</span>
                                        <p class="text-gray-600 text-sm mt-1">{{ assessmentResult.path_recommendation.reasoning }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ“ä½œæŒ‰é’® -->
                        <div class="flex gap-4">
                            <button 
                                @click="acceptPathRecommendation"
                                v-if="assessmentResult.path_recommendation"
                                class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition">
                                <i class="fas fa-check mr-2"></i>æ¥å—è·¯å¾„æ¨è
                            </button>
                            <button 
                                @click="viewLearningPath"
                                class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-map mr-2"></i>æŸ¥çœ‹å­¦ä¹ è·¯å¾„
                            </button>
                            <button 
                                @click="resetForm"
                                class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-plus mr-2"></i>æäº¤æ–°ä½œä¸š
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- é¡µè„š -->
        <footer class="bg-gray-800 text-white py-8 mt-16">
            <div class="container mx-auto px-6 text-center">
                <p>&copy; 2024 AIåŠ©æ•™è¯„ä¼°ä¸ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ç³»ç»Ÿ. All rights reserved.</p>
                <p class="mt-2 text-gray-400">æ™ºèƒ½æ•™å­¦ï¼Œå› ææ–½æ•™</p>
            </div>
        </footer>
    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    activeTab: 'diagnostic',
                    loading: false,
                    isDragging: false,
                    selectedFiles: [],
                    
                    // è¯Šæ–­ç›¸å…³æ•°æ®
                    diagnosticStarted: false,
                    diagnosticCompleted: false,
                    diagnosticForm: {
                        studentId: ''
                    },
                    studentProfile: null,
                    pathRecommendation: null,
                    
                    // å­¦ä¹ è·¯å¾„ç›¸å…³æ•°æ®
                    studentProgress: null,
                    currentTask: null,
                    learningNodes: [],
                    latestRecommendation: null,
                    
                    // ä½œä¸šæäº¤æ•°æ®
                    uploadForm: {
                        studentId: '',
                        ideaText: ''
                    },
                    assessmentResult: null,
                    
                    // å†å²è®°å½•æ•°æ®
                    historyData: [],
                    historyLoading: false,
                    historyFilter: {
                        studentId: ''
                    }
                }
            },
            computed: {
                filteredHistory() {
                    let filtered = this.historyData
                    if (this.historyFilter.studentId) {
                        const studentId = this.historyFilter.studentId.toLowerCase().trim()
                        filtered = filtered.filter(record => 
                            record.student_id.toLowerCase().includes(studentId)
                        )
                    }
                    return filtered
                }
            },
            methods: {
                // ================ è¯Šæ–­æµ‹è¯•æ–¹æ³• ================
                async startDiagnostic() {
                    if (!this.diagnosticForm.studentId.trim()) {
                        alert('è¯·è¾“å…¥å­¦ç”ŸID')
                        return
                    }
                    
                    this.loading = true
                    try {
                        // æ¨¡æ‹Ÿå¼€å§‹è¯Šæ–­æµ‹è¯•
                        this.diagnosticStarted = true
                        // å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨è¯Šæ–­API
                        // const response = await fetch('/api/learning-path/diagnostic', {...})
                    } catch (error) {
                        alert('å¯åŠ¨è¯Šæ–­æµ‹è¯•å¤±è´¥: ' + error.message)
                        this.diagnosticStarted = false
                    } finally {
                        this.loading = false
                    }
                },
                
                async completeDiagnostic() {
                    this.loading = true
                    try {
                        // æ¨¡æ‹Ÿè¯Šæ–­å®Œæˆï¼Œæäº¤ç»“æœ
                        const mockDiagnosticResults = {
                            concept_score: 75,
                            coding_score: 68,
                            tool_familiarity: 80,
                            skill_scores: {
                                "PythonåŸºç¡€": 70,
                                "Git": 45,
                                "HTTPåè®®": 65
                            },
                            interests: ["RAG", "Agent"],
                            learning_style_preference: "examples_first",
                            time_budget_hours_per_week: 8,
                            goals: ["å®ŒæˆRAGåº”ç”¨", "æŒæ¡å…¨æ ˆå¼€å‘"]
                        }
                        
                        const response = await fetch('/api/learning-path/diagnostic', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                student_id: this.diagnosticForm.studentId,
                                diagnostic_results: mockDiagnosticResults
                            })
                        })
                        
                        if (response.ok) {
                            const result = await response.json()
                            this.studentProfile = result.student_profile
                            this.pathRecommendation = result.recommendations
                            this.diagnosticCompleted = true
                            this.diagnosticStarted = false
                        } else {
                            throw new Error('è¯Šæ–­è¯„ä¼°å¤±è´¥')
                        }
                    } catch (error) {
                        alert('å®Œæˆè¯Šæ–­å¤±è´¥: ' + error.message)
                    } finally {
                        this.loading = false
                    }
                },
                
                resetDiagnostic() {
                    this.diagnosticStarted = false
                    this.diagnosticCompleted = false
                    this.studentProfile = null
                    this.pathRecommendation = null
                    this.diagnosticForm.studentId = ''
                },
                
                // ================ å­¦ä¹ è·¯å¾„æ–¹æ³• ================
                async loadStudentProgress() {
                    if (!this.diagnosticForm.studentId) return
                    
                    try {
                        const response = await fetch(`/api/learning-path/progress/${this.diagnosticForm.studentId}`)
                        if (response.ok) {
                            const data = await response.json()
                            this.studentProgress = data.progress_summary
                            this.currentTask = data.current_task
                            await this.loadLearningPath()
                        }
                    } catch (error) {
                        console.error('åŠ è½½å­¦ç”Ÿè¿›åº¦å¤±è´¥:', error)
                    }
                },
                
                async loadLearningPath() {
                    try {
                        const response = await fetch('/api/learning-path/path/info')
                        if (response.ok) {
                            const data = await response.json()
                            this.learningNodes = data.nodes
                        }
                    } catch (error) {
                        console.error('åŠ è½½å­¦ä¹ è·¯å¾„å¤±è´¥:', error)
                    }
                },
                
                viewLearningPath() {
                    this.activeTab = 'learning-path'
                    this.loadStudentProgress()
                },
                
                async acceptPathRecommendation() {
                    // è¿™é‡Œå®ç°æ¥å—è·¯å¾„æ¨èçš„é€»è¾‘
                    alert('è·¯å¾„æ¨èå·²åº”ç”¨åˆ°æ‚¨çš„å­¦ä¹ è®¡åˆ’ä¸­ï¼')
                    this.viewLearningPath()
                },
                
                // ================ ä½œä¸šæäº¤æ–¹æ³• ================
                async submitAssignment() {
                    if (!this.uploadForm.studentId || !this.uploadForm.ideaText || this.selectedFiles.length === 0) {
                        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«ä¿¡æ¯å¹¶é€‰æ‹©æ–‡ä»¶')
                        return
                    }

                    this.loading = true
                    try {
                        const formData = new FormData()
                        formData.append('student_id', this.uploadForm.studentId)
                        formData.append('idea_text', this.uploadForm.ideaText)
                        
                        this.selectedFiles.forEach(file => {
                            formData.append('files', file)
                        })

                        const response = await fetch('/api/assessment/submit', {
                            method: 'POST',
                            body: formData
                        })

                        if (response.ok) {
                            const result = await response.json()
                            this.assessmentResult = result
                            
                            // ç­‰å¾…è¯„ä¼°å®Œæˆå¹¶è·å–è·¯å¾„æ¨è
                            setTimeout(() => {
                                this.checkAssessmentWithPath(result.assessment_id)
                            }, 3000)
                            
                            this.scrollToResult()
                        } else {
                            const error = await response.json()
                            alert('æäº¤å¤±è´¥: ' + (error.detail || 'æœªçŸ¥é”™è¯¯'))
                        }
                    } catch (error) {
                        alert('æäº¤å¤±è´¥: ' + error.message)
                    } finally {
                        this.loading = false
                    }
                },
                
                async checkAssessmentWithPath(assessmentId) {
                    try {
                        const response = await fetch(`/api/assessment/${assessmentId}`)
                        if (response.ok) {
                            const result = await response.json()
                            if (result.status === 'completed') {
                                this.assessmentResult = result
                                
                                // æ¨¡æ‹Ÿè·¯å¾„æ¨èç»“æœ
                                this.assessmentResult.path_recommendation = {
                                    decision_type: 'keep',
                                    channel: 'B',
                                    next_node_id: 'model_deployment',
                                    reasoning: 'åŸºäºæ‚¨çš„ä¼˜ç§€è¡¨ç°ï¼Œå»ºè®®ç»§ç»­åœ¨Bé€šé“å­¦ä¹ ä¸‹ä¸€ä¸ªèŠ‚ç‚¹'
                                }
                            }
                        }
                    } catch (error) {
                        console.error('æ£€æŸ¥è¯„ä¼°çŠ¶æ€å¤±è´¥:', error)
                    }
                },
                
                // ================ å†å²è®°å½•æ–¹æ³• ================
                async loadHistory() {
                    this.historyLoading = true
                    try {
                        let url = '/api/assessment/history'
                        const params = new URLSearchParams()
                        
                        if (this.historyFilter.studentId.trim()) {
                            params.append('student_id', this.historyFilter.studentId.trim())
                        }
                        
                        if (params.toString()) {
                            url += '?' + params.toString()
                        }
                        
                        const response = await fetch(url)
                        if (response.ok) {
                            const data = await response.json()
                            this.historyData = data.assessments || []
                        }
                    } catch (error) {
                        console.error('åŠ è½½å†å²è®°å½•å¤±è´¥:', error)
                    } finally {
                        this.historyLoading = false
                    }
                },
                
                viewHistoryDetail(record) {
                    // æŸ¥çœ‹å†å²è®°å½•è¯¦æƒ…
                    this.assessmentResult = record
                    this.scrollToResult()
                },
                
                // ================ å·¥å…·æ–¹æ³• ================
                handleFileSelect(event) {
                    this.selectedFiles = Array.from(event.target.files)
                },
                
                handleFileDrop(event) {
                    this.isDragging = false
                    this.selectedFiles = Array.from(event.dataTransfer.files)
                },
                
                clearFiles() {
                    this.selectedFiles = []
                    if (this.$refs.fileInput) {
                        this.$refs.fileInput.value = ''
                    }
                },
                
                formatFileSize(bytes) {
                    if (bytes === 0) return '0 B'
                    const k = 1024
                    const sizes = ['B', 'KB', 'MB', 'GB']
                    const i = Math.floor(Math.log(bytes) / Math.log(k))
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
                },
                
                resetForm() {
                    this.assessmentResult = null
                    this.selectedFiles = []
                    this.uploadForm = { studentId: '', ideaText: '' }
                    if (this.$refs.fileInput) {
                        this.$refs.fileInput.value = ''
                    }
                    window.scrollTo({ top: 0, behavior: 'smooth' })
                },
                
                scrollToResult() {
                    this.$nextTick(() => {
                        const element = document.querySelector('.result-card')
                        if (element) {
                            element.scrollIntoView({ behavior: 'smooth' })
                        }
                    })
                },
                
                // ================ æ ·å¼æ–¹æ³• ================
                getStyleText(style) {
                    const styleMap = {
                        'examples_first': 'ç¤ºä¾‹ä¼˜å…ˆå­¦ä¹ ',
                        'theory_first': 'ç†è®ºä¼˜å…ˆå­¦ä¹ ',
                        'hands_on': 'åŠ¨æ‰‹å®è·µå­¦ä¹ ',
                        'visual': 'å¯è§†åŒ–å­¦ä¹ '
                    }
                    return styleMap[style] || style
                },
                
                getChannelClass(channel) {
                    const classMap = {
                        'A': 'bg-green-100 text-green-800 px-2 py-1 rounded text-sm',
                        'B': 'bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm',
                        'C': 'bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm'
                    }
                    return classMap[channel] || 'bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm'
                },
                
                getDecisionClass(decision) {
                    const classMap = {
                        'upgrade': 'bg-green-100 text-green-800 px-2 py-1 rounded text-sm',
                        'keep': 'bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm', 
                        'downgrade_with_scaffold': 'bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm'
                    }
                    return classMap[decision] || 'bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm'
                },
                
                getDecisionText(decision) {
                    const textMap = {
                        'upgrade': 'å‡çº§é€šé“',
                        'keep': 'ä¿æŒå½“å‰',
                        'downgrade_with_scaffold': 'é™çº§è¾…å¯¼'
                    }
                    return textMap[decision] || decision
                },
                
                getNodeClass(node, index) {
                    // æ ¹æ®èŠ‚ç‚¹çŠ¶æ€è¿”å›æ ·å¼ç±»
                    return 'border-gray-200 bg-white hover:border-blue-300'
                },
                
                getNodeIconClass(node, index) {
                    // æ ¹æ®èŠ‚ç‚¹çŠ¶æ€è¿”å›å›¾æ ‡æ ·å¼
                    return 'bg-blue-500'
                },
                
                getNodeStatusIcon(node) {
                    // æ ¹æ®èŠ‚ç‚¹çŠ¶æ€è¿”å›çŠ¶æ€å›¾æ ‡
                    return 'fas fa-clock text-gray-400'
                },
                
                getEstimatedHours(node) {
                    // è·å–èŠ‚ç‚¹é¢„ä¼°æ—¶é—´
                    return node.estimated_hours?.B || 8
                },
                
                getNodeName(nodeId) {
                    const nodeNames = {
                        'api_calling': 'APIè°ƒç”¨',
                        'model_deployment': 'æ¨¡å‹éƒ¨ç½²', 
                        'no_code_ai': 'é›¶ä»£ç é…ç½®AIåº”ç”¨',
                        'rag_system': 'RAGç³»ç»Ÿ',
                        'ui_design': 'UIè®¾è®¡',
                        'frontend_dev': 'å‰ç«¯å¼€å‘',
                        'backend_dev': 'åç«¯å¼€å‘'
                    }
                    return nodeNames[nodeId] || nodeId
                },
                
                getStatusText(status) {
                    const statusMap = {
                        'completed': 'å·²å®Œæˆ',
                        'in_progress': 'è¿›è¡Œä¸­',
                        'queued': 'æ’é˜Ÿä¸­',
                        'failed': 'å¤±è´¥'
                    }
                    return statusMap[status] || status
                },
                
                getStatusBadgeClass(status) {
                    const classMap = {
                        'completed': 'bg-green-100 text-green-800',
                        'in_progress': 'bg-orange-100 text-orange-800',
                        'queued': 'bg-blue-100 text-blue-800',
                        'failed': 'bg-red-100 text-red-800'
                    }
                    return classMap[status] || 'bg-gray-100 text-gray-800'
                },
                
                formatDateTime(dateTimeStr) {
                    if (!dateTimeStr) return ''
                    try {
                        const date = new Date(dateTimeStr)
                        return date.toLocaleString('zh-CN', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit'
                        })
                    } catch {
                        return dateTimeStr
                    }
                }
            },
            watch: {
                // ç›‘å¬æ ‡ç­¾é¡µåˆ‡æ¢
                activeTab(newTab) {
                    if (newTab === 'history' && this.historyData.length === 0) {
                        this.loadHistory()
                    } else if (newTab === 'learning-path' && this.diagnosticForm.studentId) {
                        this.loadStudentProgress()
                    }
                }
            },
            mounted() {
                // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–é€»è¾‘
                console.log('AIåŠ©æ•™è¯„ä¼°ä¸ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ç³»ç»Ÿå·²åŠ è½½')
            }
        }).mount('#app')
    </script>
</body>
</html>
