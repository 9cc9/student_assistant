<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI助教与个性化学习路径规划系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app">
        <!-- 头部 -->
        <header class="gradient-bg text-white shadow-lg">
            <div class="container mx-auto px-6 py-8">
                <div class="flex justify-between items-center">
                    <!-- 左侧占位 -->
                    <div class="w-1/4"></div>
                    <!-- 标题居中 -->
                    <h1 class="text-3xl font-bold text-center flex-1 whitespace-nowrap">
                        <i class="fas fa-robot mr-3"></i>AI助教与个性化学习路径规划系统
                    </h1>
                    <!-- 登录状态显示 -->
                    <div v-if="!isLoggedIn" class="flex gap-3 w-1/4 justify-end">
                        <button @click="showLoginModal = true" class="px-4 py-2 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition">
                            <i class="fas fa-sign-in-alt mr-2"></i>登录
                        </button>
                        <button @click="showRegisterModal = true" class="px-4 py-2 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-600 transition border-2 border-white">
                            <i class="fas fa-user-plus mr-2"></i>注册
                        </button>
                    </div>
                    <div v-else class="flex items-center gap-4 w-1/4 justify-end">
                        <div class="text-right">
                            <p class="font-semibold">{{ currentStudent?.name }}</p>
                            <p class="text-sm opacity-80">{{ currentStudent?.student_id }}</p>
                        </div>
                        <button @click="logout" class="px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                            <i class="fas fa-sign-out-alt mr-2"></i>登出
                        </button>
                    </div>
                </div>
                <p class="text-center mt-4 text-lg opacity-90">智能评估 + 个性化学习 = 因材施教</p>
            </div>
        </header>
        
        <!-- 登录模态框 -->
        <div v-if="showLoginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click="showLoginModal = false">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4" @click.stop>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                    <i class="fas fa-sign-in-alt text-purple-600 mr-2"></i>学生登录
                </h2>
                <form @submit.prevent="login">
                    <div v-if="authError" class="mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm">
                        {{ authError }}
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">学生ID</label>
                        <input v-model="loginForm.student_id" type="text" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入学生ID">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">密码</label>
                        <input v-model="loginForm.password" type="password" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入密码">
                    </div>
                    <button type="submit" :disabled="loading"
                        class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition disabled:bg-gray-400">
                        <i class="fas fa-sign-in-alt mr-2"></i>{{ loading ? '登录中...' : '登录' }}
                    </button>
                    <div class="mt-4 text-center">
                        <button type="button" @click="showRegisterModal = true; showLoginModal = false" class="text-purple-600 hover:text-purple-700 text-sm">
                            还没有账号？立即注册
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- 注册模态框 -->
        <div v-if="showRegisterModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click="showRegisterModal = false">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4" @click.stop>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                    <i class="fas fa-user-plus text-purple-600 mr-2"></i>学生注册
                </h2>
                <form @submit.prevent="register">
                    <div v-if="authError" class="mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm">
                        {{ authError }}
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">学生ID *</label>
                        <input v-model="registerForm.student_id" type="text" required minlength="3"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入学生ID（至少3位）">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">姓名 *</label>
                        <input v-model="registerForm.name" type="text" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入姓名">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">邮箱（可选）</label>
                        <input v-model="registerForm.email" type="email"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入邮箱">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">密码 *</label>
                        <input v-model="registerForm.password" type="password" required minlength="6"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请输入密码（至少6位）">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">确认密码 *</label>
                        <input v-model="registerForm.confirmPassword" type="password" required minlength="6"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="请再次输入密码">
                    </div>
                    <button type="submit" :disabled="loading"
                        class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition disabled:bg-gray-400">
                        <i class="fas fa-user-plus mr-2"></i>{{ loading ? '注册中...' : '注册' }}
                    </button>
                    <div class="mt-4 text-center">
                        <button type="button" @click="showLoginModal = true; showRegisterModal = false" class="text-purple-600 hover:text-purple-700 text-sm">
                            已有账号？立即登录
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 主要内容 -->
        <main class="container mx-auto px-6 py-12">
            <!-- 选项卡导航 -->
            <div class="max-w-6xl mx-auto">

                <!-- 选项卡 -->
                <div class="mb-8">
                    <div class="flex border-b overflow-x-auto">
                        <button 
                            v-if="isLoggedIn"
                            @click="activeTab = 'profile'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 whitespace-nowrap', 
                                    activeTab === 'profile' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-user-circle mr-2"></i>个人中心
                        </button>
                        <button 
                            v-if="isLoggedIn"
                            @click="activeTab = 'diagnostic'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 whitespace-nowrap', activeTab === 'profile' ? 'ml-8' : '', 
                                    activeTab === 'diagnostic' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-user-graduate mr-2"></i>入学诊断
                        </button>
                        <button 
                            v-if="isLoggedIn"
                            @click="activeTab = 'learning-path'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 ml-8 whitespace-nowrap', 
                                    activeTab === 'learning-path' ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-route mr-2"></i>学习路径
                        </button>
                        <button 
                            v-if="isLoggedIn"
                            @click="activeTab = 'upload'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 ml-8 whitespace-nowrap', 
                                    activeTab === 'upload' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-upload mr-2"></i>作业提交
                        </button>
                        <button 
                            @click="activeTab = 'history'"
                            :class="['px-6 py-3 font-semibold text-lg border-b-2 whitespace-nowrap', 
                                    activeTab === 'history' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500']">
                            <i class="fas fa-history mr-2"></i>学习记录
                        </button>
                    </div>
                </div>

                <!-- 个人中心 -->
                <div v-if="isLoggedIn && activeTab === 'profile'" class="bg-white rounded-xl card-shadow p-8">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-user-circle text-indigo-600 mr-3"></i>个人信息
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-6 rounded-lg">
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-id-card text-indigo-600 text-2xl mr-3"></i>
                                    <div>
                                        <p class="text-sm text-gray-600">学生ID</p>
                                        <p class="text-lg font-semibold text-gray-800">{{ currentStudent?.student_id }}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-lg">
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-user text-blue-600 text-2xl mr-3"></i>
                                    <div>
                                        <p class="text-sm text-gray-600">姓名</p>
                                        <p class="text-lg font-semibold text-gray-800">{{ currentStudent?.name }}</p>
                                    </div>
                                </div>
                            </div>
                            <div v-if="currentStudent?.email" class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg">
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-envelope text-green-600 text-2xl mr-3"></i>
                                    <div>
                                        <p class="text-sm text-gray-600">邮箱</p>
                                        <p class="text-lg font-semibold text-gray-800">{{ currentStudent?.email }}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-lg">
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-calendar text-orange-600 text-2xl mr-3"></i>
                                    <div>
                                        <p class="text-sm text-gray-600">注册时间</p>
                                        <p class="text-sm font-semibold text-gray-800">{{ formatDateTime(currentStudent?.created_at) }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 诊断历史卡片（个人中心版本） -->
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-stethoscope text-purple-600 mr-3"></i>诊断测试历史
                        </h3>
                        
                        <!-- 加载中 -->
                        <div v-if="diagnosticHistoryLoading" class="text-center py-8">
                            <i class="fas fa-spinner fa-spin mr-2 text-purple-600"></i>
                            <span class="text-gray-600">加载中...</span>
                        </div>
                        
                        <!-- 诊断历史列表 -->
                        <div v-else-if="diagnosticHistory.length > 0" class="space-y-4">
                            <div v-for="record in diagnosticHistory" :key="record.test_id" 
                                class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg border-2 border-purple-100 hover:border-purple-300 transition">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <p class="text-sm text-gray-600 mb-1">测试时间</p>
                                        <p class="font-semibold text-gray-800">{{ formatDateTime(record.submitted_at) }}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm text-gray-600 mb-1">整体评价</p>
                                        <span class="px-3 py-1 rounded-full text-sm font-semibold"
                                            :class="{
                                                'bg-green-100 text-green-700': record.overall_readiness === '优秀',
                                                'bg-blue-100 text-blue-700': record.overall_readiness === '良好',
                                                'bg-yellow-100 text-yellow-700': record.overall_readiness === '合格',
                                                'bg-orange-100 text-orange-700': record.overall_readiness === '需要加强'
                                            }">
                                            {{ record.overall_readiness }}
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-3 gap-4 mb-4">
                                    <div class="text-center bg-white/50 rounded-lg p-3">
                                        <p class="text-2xl font-bold text-purple-600">{{ record.concept_score }}</p>
                                        <p class="text-xs text-gray-600 mt-1">概念理解</p>
                                    </div>
                                    <div class="text-center bg-white/50 rounded-lg p-3">
                                        <p class="text-2xl font-bold text-blue-600">{{ record.coding_score }}</p>
                                        <p class="text-xs text-gray-600 mt-1">编程能力</p>
                                    </div>
                                    <div class="text-center bg-white/50 rounded-lg p-3">
                                        <p class="text-2xl font-bold text-pink-600">{{ record.tool_familiarity }}</p>
                                        <p class="text-xs text-gray-600 mt-1">工具熟悉度</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between text-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded">
                                            <i class="fas fa-layer-group mr-1"></i>{{ record.learning_level }}通道
                                        </span>
                                        <span class="text-gray-600">
                                            <i class="fas fa-heart mr-1"></i>{{ record.learning_style === 'hands_on' ? '实践型' : record.learning_style === 'theory_first' ? '理论型' : '混合型' }}
                                        </span>
                                    </div>
                                    <span class="text-gray-500 text-xs">ID: {{ record.test_id.slice(-8) }}</span>
                                </div>
                                
                                <div v-if="record.interests && record.interests.length > 0" class="mt-3 pt-3 border-t border-purple-200">
                                    <p class="text-xs text-gray-600 mb-2">兴趣领域:</p>
                                    <div class="flex flex-wrap gap-2">
                                        <span v-for="interest in record.interests" :key="interest" 
                                            class="px-2 py-1 bg-white text-purple-600 rounded-full text-xs">
                                            {{ interest }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 空状态 -->
                        <div v-else class="text-center py-12">
                            <i class="fas fa-clipboard-list text-6xl text-gray-300 mb-4"></i>
                            <p class="text-xl text-gray-500 mb-2">暂无诊断记录</p>
                            <p class="text-gray-400 mb-4">完成入学诊断测试后，记录将显示在这里</p>
                            <button @click="activeTab = 'diagnostic'" 
                                class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                                <i class="fas fa-user-graduate mr-2"></i>开始诊断测试
                            </button>
                        </div>
                    </div>
                    
                    <!-- 学习统计 -->
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-chart-line text-green-600 mr-3"></i>学习统计
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg text-center">
                                <div class="text-3xl font-bold text-blue-600 mb-2">{{ historyData.length }}</div>
                                <div class="text-gray-600 font-semibold">完成作业数</div>
                            </div>
                            <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg text-center">
                                <div class="text-3xl font-bold text-green-600 mb-2">
                                    {{ learningStatistics.average_score > 0 ? learningStatistics.average_score : '-' }}
                                </div>
                                <div class="text-gray-600 font-semibold">平均成绩</div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg text-center">
                                <div class="text-3xl font-bold text-purple-600 mb-2">
                                    {{ learningStatistics.completion_rate > 0 ? learningStatistics.completion_rate : '-' }}%
                                </div>
                                <div class="text-gray-600 font-semibold">学习进度</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 快速操作 -->
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-bolt text-yellow-600 mr-3"></i>快速操作
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button @click="activeTab = 'diagnostic'" class="p-4 border-2 border-purple-200 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition text-left">
                                <i class="fas fa-user-graduate text-purple-600 text-xl mr-3"></i>
                                <span class="font-semibold text-gray-800">开始诊断测试</span>
                            </button>
                            <button @click="activeTab = 'upload'" class="p-4 border-2 border-blue-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition text-left">
                                <i class="fas fa-upload text-blue-600 text-xl mr-3"></i>
                                <span class="font-semibold text-gray-800">提交作业</span>
                            </button>
                            <button @click="activeTab = 'history'" class="p-4 border-2 border-orange-200 rounded-lg hover:border-orange-400 hover:bg-orange-50 transition text-left">
                                <i class="fas fa-history text-orange-600 text-xl mr-3"></i>
                                <span class="font-semibold text-gray-800">查看学习记录</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 入学诊断模式 -->
                <div v-show="isLoggedIn && activeTab === 'diagnostic'" class="bg-white rounded-xl card-shadow p-8">
                    <div v-if="!diagnosticStarted && !diagnosticCompleted">
                        <div class="text-center mb-8">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">AI课程入学诊断测试</h3>
                            <p class="text-gray-600 text-lg mb-6">通过这个测试，我们将了解你的技术基础和学习偏好，为你推荐最适合的学习路径</p>
                        </div>
                        
                        <div class="diagnostic-card p-6 rounded-lg mb-6">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">测试内容包括：</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="flex items-center p-3 bg-blue-50 rounded-lg">
                                    <i class="fas fa-lightbulb text-blue-500 mr-3"></i>
                                    <span>基础概念测试 (5分钟)</span>
                                </div>
                                <div class="flex items-center p-3 bg-green-50 rounded-lg">
                                    <i class="fas fa-code text-green-500 mr-3"></i>
                                    <span>编程能力测试 (8分钟)</span>
                                </div>
                                <div class="flex items-center p-3 bg-yellow-50 rounded-lg">
                                    <i class="fas fa-tools text-yellow-500 mr-3"></i>
                                    <span>工具熟悉度调查 (2分钟)</span>
                                </div>
                                <div class="flex items-center p-3 bg-purple-50 rounded-lg">
                                    <i class="fas fa-heart text-purple-500 mr-3"></i>
                                    <span>学习偏好调查 (2分钟)</span>
                                </div>
                            </div>
                        </div>

                        <form @submit.prevent="startDiagnostic">
                            <div class="mb-6">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">学生ID</label>
                                <input 
                                    v-model="diagnosticForm.studentId" 
                                    type="text" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    placeholder="请输入学生ID">
                            </div>
                            
                            <div class="text-center">
                                <button 
                                    type="submit"
                                    :disabled="loading"
                                    class="bg-gradient-to-r from-purple-500 to-pink-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:from-purple-600 hover:to-pink-700 transition duration-300 disabled:opacity-50">
                                    <span v-if="loading">
                                        <i class="fas fa-spinner fa-spin mr-2"></i>加载中...
                                    </span>
                                    <span v-else>
                                        <i class="fas fa-rocket mr-2"></i>开始诊断测试 (约15分钟)
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- 诊断测试进行中 -->
                    <div v-else-if="diagnosticStarted && !diagnosticCompleted && diagnosticTest" class="space-y-6">
                        <!-- 进度条 -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-gray-700">
                                    测试进度: {{ currentSection + 1 }} / {{ diagnosticTest.sections.length }}
                                </span>
                                <span class="text-sm text-gray-600">
                                    {{ diagnosticTest.sections[currentSection].title }}
                                </span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="progress-bar h-3 rounded-full transition-all duration-300" 
                                     :style="{width: ((currentSection + 1) / diagnosticTest.sections.length * 100) + '%'}"></div>
                            </div>
                        </div>
                        
                        <!-- 当前模块标题 -->
                        <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">
                                {{ diagnosticTest.sections[currentSection].title }}
                            </h3>
                            <p class="text-gray-600">{{ diagnosticTest.sections[currentSection].description }}</p>
                            <p v-if="diagnosticTest.sections[currentSection].time_limit" class="text-sm text-gray-500 mt-2">
                                <i class="fas fa-clock mr-1"></i>
                                建议用时: {{ Math.floor(diagnosticTest.sections[currentSection].time_limit / 60) }}分钟
                            </p>
                        </div>

                        <!-- 测试内容区域 -->
                        <div class="bg-white p-6 rounded-lg border-2 border-gray-200">
                            <!-- 概念测试 -->
                            <div v-if="diagnosticTest.sections[currentSection].id === 'concepts'">
                                <div v-for="(q, index) in diagnosticTest.sections[currentSection].questions" :key="q.id" 
                                     class="mb-8 pb-8 border-b border-gray-200 last:border-b-0">
                                    <h4 class="font-semibold text-gray-800 mb-3">
                                        {{ index + 1 }}. {{ q.question }}
                                    </h4>
                                    
                                    <!-- 选择题 -->
                                    <div v-if="q.type === 'multiple_choice'" class="space-y-2">
                                        <label v-for="opt in q.options" :key="opt" 
                                               class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition">
                                            <input type="radio" 
                                                   :name="q.id" 
                                                   :value="opt.charAt(0)"
                                                   v-model="studentAnswers.concepts[q.id]"
                                                   class="mr-3 w-4 h-4 text-purple-600" />
                                            <span>{{ opt }}</span>
                                        </label>
                                    </div>
                                    
                                    <!-- 简答题 -->
                                    <textarea v-else-if="q.type === 'short_answer'"
                                              v-model="studentAnswers.concepts[q.id]"
                                              placeholder="请输入你的答案..."
                                              rows="4"
                                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                                </div>
                            </div>

                            <!-- 编程测试 -->
                            <div v-if="diagnosticTest.sections[currentSection].id === 'coding'">
                                <div v-for="(q, index) in diagnosticTest.sections[currentSection].questions" :key="q.id"
                                     class="mb-8 pb-8 border-b border-gray-200 last:border-b-0">
                                    <h4 class="font-semibold text-gray-800 mb-3">
                                        {{ index + 1 }}. {{ q.question }}
                                    </h4>
                                    
                                    <!-- 代码题 -->
                                    <div v-if="q.type === 'coding'">
                                        <div v-if="q.template" class="bg-gray-100 p-3 rounded mb-2">
                                            <code class="text-sm text-gray-700">{{ q.template }}</code>
                                        </div>
                                        <textarea v-model="studentAnswers.coding[q.id]"
                                                  :placeholder="q.template || '请输入你的代码...'"
                                                  rows="10"
                                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                                  style="font-family: 'Courier New', monospace;"></textarea>
                                    </div>
                                    
                                    <!-- 代码分析题 -->
                                    <div v-else-if="q.type === 'code_analysis'">
                                        <div class="bg-gray-900 text-green-400 p-4 rounded mb-3">
                                            <pre class="text-sm"><code>{{ q.code }}</code></pre>
                                        </div>
                                        <textarea v-model="studentAnswers.coding[q.id]"
                                                  placeholder="请解释这段代码的输出结果，并说明原因..."
                                                  rows="4"
                                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- 工具调查 -->
                            <div v-if="diagnosticTest.sections[currentSection].id === 'tools'">
                                <p class="text-gray-600 mb-6">请为每项工具评分（1-5星，1星=不熟悉，5星=非常熟悉）</p>
                                <!-- 遍历转换后的questions数组 -->
                                <div v-for="q in diagnosticTest.sections[currentSection].questions" :key="q.id"
                                     class="mb-6">
                                    <h4 class="font-semibold text-gray-800 mb-3 pb-2 border-b">
                                        <i class="fas fa-folder mr-2 text-blue-500"></i>{{ q.category.name }}
                                    </h4>
                                    <div v-for="tool in q.category.tools" :key="tool.name"
                                         class="flex items-center justify-between py-3 border-b border-gray-100">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-700">{{ tool.name }}</div>
                                            <div class="text-sm text-gray-500">{{ tool.description }}</div>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <button v-for="star in 5" :key="star"
                                                    @click="studentAnswers.tools[tool.name] = star"
                                                    type="button"
                                                    class="text-2xl transition-all duration-200 hover:scale-110"
                                                    :class="studentAnswers.tools[tool.name] >= star ? 'text-yellow-400' : 'text-gray-300'">
                                                ★
                                            </button>
                                            <span v-if="studentAnswers.tools[tool.name]" 
                                                  class="ml-2 text-sm text-gray-600">
                                                {{ studentAnswers.tools[tool.name] }}星
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 学习偏好 -->
                            <div v-if="diagnosticTest.sections[currentSection].id === 'preferences'">
                                <div v-for="(q, index) in diagnosticTest.sections[currentSection].questions" :key="q.id"
                                     class="mb-8 pb-8 border-b border-gray-200 last:border-b-0">
                                    <h4 class="font-semibold text-gray-800 mb-3">
                                        {{ index + 1 }}. {{ q.question }}
                                    </h4>
                                    
                                    <!-- 单选题 -->
                                    <div v-if="q.type === 'single_choice'" class="space-y-2">
                                        <label v-for="opt in q.options" :key="opt.value"
                                               class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition">
                                            <input type="radio" 
                                                   :name="q.id"
                                                   :value="opt.value"
                                                   v-model="studentAnswers.preferences[q.id]"
                                                   class="mr-3 w-4 h-4 text-purple-600" />
                                            <span>{{ opt.label }}</span>
                                        </label>
                                    </div>
                                    
                                    <!-- 多选题 -->
                                    <div v-else-if="q.type === 'multiple_choice'" class="space-y-2">
                                        <label v-for="opt in q.options" :key="opt.value"
                                               class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition">
                                            <input type="checkbox" 
                                                   :value="opt.value"
                                                   v-model="studentAnswers.preferences[q.id]"
                                                   class="mr-3 w-4 h-4 text-purple-600" />
                                            <span>{{ opt.label }}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 导航按钮 -->
                        <div class="flex justify-between items-center pt-6">
                            <button v-if="currentSection > 0"
                                    @click="previousSection"
                                    class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-arrow-left mr-2"></i>上一步
                            </button>
                            <div v-else></div>
                            
                            <button v-if="currentSection < diagnosticTest.sections.length - 1"
                                    @click="nextSection"
                                    :disabled="loading"
                                    class="bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition disabled:opacity-50">
                                下一步<i class="fas fa-arrow-right ml-2"></i>
                            </button>
                            <button v-else
                                    @click="nextSection"
                                    :disabled="loading"
                                    class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50">
                                <span v-if="loading">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>提交中...
                                </span>
                                <span v-else>
                                    <i class="fas fa-check mr-2"></i>提交测试
                                </span>
                            </button>
                        </div>
                    </div>

                    <!-- 诊断完成 -->
                    <div v-else-if="diagnosticCompleted && studentProfile" class="space-y-6">
                        <div class="text-center mb-6">
                            <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">诊断测试完成！</h3>
                            <p class="text-gray-600">已为您生成个性化学习画像和路径推荐</p>
                        </div>

                        <!-- 评估结果展示 -->
                        <div v-if="evaluationResult" class="bg-gradient-to-r from-green-50 to-teal-50 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-chart-line mr-2 text-green-500"></i>您的测试结果
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="bg-white p-4 rounded-lg text-center">
                                    <div class="text-3xl font-bold text-blue-600">{{ evaluationResult.concept_score }}</div>
                                    <div class="text-gray-600 text-sm mt-1">概念理解</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg text-center">
                                    <div class="text-3xl font-bold text-purple-600">{{ evaluationResult.coding_score }}</div>
                                    <div class="text-gray-600 text-sm mt-1">编程能力</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg text-center">
                                    <div class="text-3xl font-bold text-orange-600">{{ evaluationResult.tool_familiarity }}</div>
                                    <div class="text-gray-600 text-sm mt-1">工具熟悉度</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg text-center">
                                    <div class="text-2xl font-bold text-green-600">{{ evaluationResult.overall_readiness }}</div>
                                    <div class="text-gray-600 text-sm mt-1">整体准备度</div>
                                </div>
                            </div>
                            <p class="text-gray-600 mt-4 text-sm">
                                {{ evaluationResult.overall_readiness_description }}
                            </p>
                        </div>

                        <!-- 学习画像展示 -->
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-user-circle mr-2 text-blue-500"></i>您的学习画像
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">学习水平：</span>
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">{{ studentProfile.level }}</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">学习风格：</span>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">{{ getStyleText(studentProfile.learning_style) }}</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">时间预算：</span>
                                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm">{{ studentProfile.time_budget }}小时/周</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">兴趣领域：</span>
                                        <div class="mt-1">
                                            <span v-for="interest in studentProfile.interests" :key="interest"
                                                  class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm mr-1">{{ interest }}</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">薄弱技能：</span>
                                        <div class="mt-1">
                                            <span v-for="skill in studentProfile.weak_skills.slice(0, 3)" :key="skill"
                                                  class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm mr-1">{{ skill }}</span>
                                            <span v-if="studentProfile.weak_skills.length > 3" class="text-gray-500 text-sm">
                                                等{{ studentProfile.weak_skills.length }}项
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 推荐路径 -->
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-route mr-2 text-indigo-500"></i>推荐学习路径
                            </h4>
                            <div class="mb-4 p-4 bg-white rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-semibold text-gray-700">推荐通道：</span>
                                    <span :class="getChannelClass(pathRecommendation.recommended_channel)"
                                          class="text-lg font-bold">
                                            {{ pathRecommendation.recommended_channel }}通道
                                        </span>
                                    </div>
                                <p class="text-gray-600 text-sm">{{ pathRecommendation.channel_description }}</p>
                                    </div>
                            
                            <div class="mb-4">
                                <h5 class="font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>个性化学习建议：
                                </h5>
                                <ul class="space-y-2">
                                    <li v-for="(suggestion, index) in pathRecommendation.learning_suggestions" 
                                        :key="index"
                                        class="flex items-start text-gray-700 text-sm">
                                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                                        <span>{{ suggestion }}</span>
                                    </li>
                                </ul>
                                </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white p-3 rounded">
                                        <span class="font-medium text-gray-700">重点关注：</span>
                                    <div class="mt-1">
                                        <span v-for="area in pathRecommendation.focus_areas" :key="area"
                                              class="inline-block bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs mr-1 mb-1">
                                            {{ area }}
                                        </span>
                                    </div>
                                </div>
                                <div class="bg-white p-3 rounded">
                                    <span class="font-medium text-gray-700">学习进度：</span>
                                    <p class="text-sm text-gray-600 mt-1">{{ pathRecommendation.estimated_weekly_progress }}</p>
                                </div>
                            </div>
                        </div>

                        <!-- 操作按钮 -->
                        <div class="flex justify-center gap-4">
                            <button 
                                @click="viewLearningPath"
                                class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-arrow-right mr-2"></i>查看学习路径
                            </button>
                            <button 
                                @click="resetDiagnostic"
                                class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-redo mr-2"></i>重新测试
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 学习路径模式 -->
                <div v-show="isLoggedIn && activeTab === 'learning-path'" class="bg-white rounded-xl card-shadow p-8">
                    <div v-if="!studentProgress">
                        <div class="text-center py-12">
                            <i class="fas fa-map-signs text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2">还没有学习路径</h3>
                            <p class="text-gray-500 mb-6">请先完成入学诊断测试，系统将为您生成个性化学习路径</p>
                            <button 
                                @click="activeTab = 'diagnostic'"
                                class="bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition">
                                <i class="fas fa-brain mr-2"></i>开始入学诊断
                            </button>
                        </div>
                    </div>
                    
                    <div v-else class="space-y-6">
                        <!-- 学习进度概览 -->
                        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6 rounded-lg">
                            <h3 class="text-2xl font-bold mb-4">
                                <i class="fas fa-chart-line mr-3"></i>学习进度概览
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ (studentProgress.completion_rate * 100).toFixed(1) }}%</div>
                                    <div class="text-sm opacity-90">完成进度</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ studentProgress.completed_nodes.length }}/7</div>
                                    <div class="text-sm opacity-90">完成节点</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ studentProgress.current_channel }}</div>
                                    <div class="text-sm opacity-90">当前通道</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold">{{ Math.round(studentProgress.total_study_hours) }}h</div>
                                    <div class="text-sm opacity-90">学习时长</div>
                                </div>
                            </div>
                            
                            <!-- 进度条 -->
                            <div class="mt-4">
                                <div class="w-full bg-white bg-opacity-20 rounded-full h-3">
                                    <div class="progress-bar h-3 rounded-full" :style="{width: (studentProgress.completion_rate * 100) + '%'}"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 当前任务 -->
                        <div v-if="currentTask" class="bg-yellow-50 border border-yellow-200 p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-xl font-semibold text-gray-800">
                                    <i class="fas fa-tasks mr-2 text-yellow-600"></i>当前任务
                                </h4>
                                <div class="flex items-center space-x-4">
                                    <!-- 通道切换器 -->
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-600">难度：</span>
                                        <div class="flex bg-white rounded-lg p-1 border">
                                            <button 
                                                v-for="channel in ['A', 'B', 'C']" 
                                                :key="channel"
                                                @click="switchCurrentTaskChannel(channel)"
                                                :class="['px-3 py-1 rounded text-sm font-medium transition', 
                                                       currentTask.channel === channel ? getChannelButtonClass(channel) : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100']">
                                                {{ channel }}通道
                                            </button>
                                        </div>
                                    </div>
                                    <button 
                                        @click="startCurrentTask"
                                        class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition flex items-center">
                                        <i class="fas fa-upload mr-2"></i>开始完成此任务
                                    </button>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h5 class="font-semibold text-gray-700 mb-2">{{ currentTask.node_name }}</h5>
                                    <p class="text-gray-600 mb-3">{{ currentTask.task_description }}</p>
                                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                                        <span><i class="fas fa-layer-group mr-1"></i>{{ currentTask.channel }}通道</span>
                                        <span><i class="fas fa-clock mr-1"></i>{{ currentTask.estimated_hours }}小时</span>
                                        <span><i class="fas fa-signal mr-1"></i>难度{{ currentTask.difficulty_level }}/10</span>
                                    </div>
                                </div>
                                <div>
                                    <h6 class="font-semibold text-gray-700 mb-2">任务要求：</h6>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li v-for="req in currentTask.requirements" :key="req" class="flex items-start">
                                            <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5 text-xs"></i>
                                            {{ req }}
                                        </li>
                                    </ul>
                                    <h6 class="font-semibold text-gray-700 mb-2 mt-4">提交要求：</h6>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li v-for="deliverable in currentTask.deliverables" :key="deliverable" class="flex items-start">
                                            <i class="fas fa-file-upload text-blue-500 mr-2 mt-0.5 text-xs"></i>
                                            {{ deliverable }}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- 学习节点路径 -->
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <h4 class="text-xl font-semibold text-gray-800">
                                    <i class="fas fa-road mr-2 text-blue-500"></i>学习路径节点
                                </h4>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div v-for="(node, index) in learningNodes" :key="node.id" 
                                     class="path-node p-4 rounded-lg border-2 transition-all duration-200 hover:shadow-md" 
                                     :class="getNodeClass(node, index)">
                                    <div class="flex items-center justify-between mb-3">
                                        <div class="flex items-center">
                                            <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold"
                                                 :class="getNodeIconClass(node, index)">
                                                {{ index + 1 }}
                                            </div>
                                            <h5 class="font-semibold text-gray-800 ml-3">{{ node.name }}</h5>
                                        </div>
                                        <i :class="getNodeStatusIcon(node)" class="text-lg"></i>
                                    </div>
                                    
                                    <p class="text-gray-600 text-sm mb-3 line-clamp-2">{{ node.description }}</p>
                                    
                                    <!-- 已完成的节点 - 显示完成的通道，不可切换 -->
                                    <div v-if="isCompletedNode(node)" class="mb-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xs text-green-600 font-medium">已完成通道：</span>
                                            <span class="text-xs text-green-600 font-semibold">
                                                {{ getCompletedChannel(node) }}通道
                                            </span>
                                        </div>
                                        <div class="flex bg-green-100 rounded-lg p-1">
                                            <div 
                                                v-for="channel in ['A', 'B', 'C']" 
                                                :key="channel"
                                                :class="['px-2 py-1 rounded text-xs font-medium flex-1 text-center', 
                                                       getCompletedChannel(node) === channel ? getChannelButtonClass(channel) : 'text-gray-400']">
                                                {{ channel }}通道
                                            </div>
                                        </div>
                                        
                                        <!-- 显示已完成通道的任务详情 -->
                                        <div class="mt-3">
                                            <div class="bg-green-50 p-3 rounded-lg border border-green-200">
                                                <h6 class="font-semibold text-green-700 text-xs mb-2">
                                                    <i class="fas fa-check-circle mr-1"></i>{{ getCompletedChannel(node) }}通道任务
                                                </h6>
                                                <p class="text-xs text-green-600 mb-2 line-clamp-2">
                                                    {{ getChannelTask(node, getCompletedChannel(node)).task }}
                                                </p>
                                                <div class="flex items-center justify-between text-xs text-green-500">
                                                    <span><i class="fas fa-clock mr-1"></i>{{ getChannelHours(node, getCompletedChannel(node)) }}h</span>
                                                    <span><i class="fas fa-signal mr-1"></i>难度{{ getChannelDifficulty(node, getCompletedChannel(node)) }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 当前节点 - 可切换通道 -->
                                    <div v-else-if="isCurrentNode(node)" class="mb-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xs text-blue-600 font-medium">选择难度通道：</span>
                                            <span class="text-xs text-blue-600 font-semibold">
                                                当前: {{ getCurrentChannel(node) }}通道
                                            </span>
                                        </div>
                                        <div class="flex bg-gray-100 rounded-lg p-1">
                                            <button 
                                                v-for="channel in ['A', 'B', 'C']" 
                                                :key="channel"
                                                @click="switchCurrentTaskChannel(channel)"
                                                :class="['px-2 py-1 rounded text-xs font-medium transition flex-1', 
                                                       getCurrentChannel(node) === channel ? getChannelButtonClass(channel) : 'text-gray-500 hover:text-gray-700 hover:bg-gray-200']">
                                                {{ channel }}通道
                                            </button>
                                        </div>
                                        
                                        <!-- 显示当前通道的任务详情 -->
                                        <div class="mt-3">
                                            <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                                                <h6 class="font-semibold text-blue-700 text-xs mb-2">
                                                    <i class="fas fa-play-circle mr-1"></i>{{ getCurrentChannel(node) }}通道任务
                                                </h6>
                                                <p class="text-xs text-blue-600 mb-2 line-clamp-2">
                                                    {{ getChannelTask(node, getCurrentChannel(node)).task }}
                                                </p>
                                                <div class="flex items-center justify-between text-xs text-blue-500">
                                                    <span><i class="fas fa-clock mr-1"></i>{{ getChannelHours(node, getCurrentChannel(node)) }}h</span>
                                                    <span><i class="fas fa-signal mr-1"></i>难度{{ getChannelDifficulty(node, getCurrentChannel(node)) }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 未解锁的节点 - 显示所有通道但不可选择 -->
                                    <div v-else class="mb-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xs text-gray-500 font-medium">难度通道：</span>
                                            <span class="text-xs text-gray-500">
                                                <i class="fas fa-lock mr-1"></i>未解锁
                                            </span>
                                        </div>
                                        <div class="flex bg-gray-100 rounded-lg p-1 opacity-50">
                                            <div 
                                                v-for="channel in ['A', 'B', 'C']" 
                                                :key="channel"
                                                class="px-2 py-1 rounded text-xs font-medium flex-1 text-center text-gray-400">
                                                {{ channel }}通道
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 最新推荐 -->
                        <div v-if="latestRecommendation" class="bg-blue-50 border border-blue-200 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-lightbulb mr-2 text-blue-600"></i>最新路径建议
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">推荐决策：</span>
                                        <span :class="getDecisionClass(latestRecommendation.decision_type)">
                                            {{ getDecisionText(latestRecommendation.decision_type) }}
                                        </span>
                                    </div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">推荐通道：</span>
                                        <span :class="getChannelClass(latestRecommendation.recommended_channel)">
                                            {{ latestRecommendation.recommended_channel }}通道
                                        </span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-2">
                                        <span class="font-medium text-gray-700">推荐理由：</span>
                                        <p class="text-gray-600 text-sm">{{ latestRecommendation.reasoning }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 作业提交模式 (保持原有功能) -->
                <div v-show="isLoggedIn && activeTab === 'upload'" class="bg-white rounded-xl card-shadow p-8">
                    <form @submit.prevent="submitAssignment" enctype="multipart/form-data">
                        <div class="space-y-6">
                            <!-- 学生信息 -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">学生ID</label>
                                <input 
                                    v-model="uploadForm.studentId" 
                                    type="text" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="请输入学生ID">
                            </div>

                            <!-- 项目创意 -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>项目创意与任务说明
                                </label>
                                <p class="text-xs text-gray-500 mb-2">
                                    详细描述您的项目创意，包括：目标用户、核心功能、技术方案等
                                </p>
                                <textarea 
                                    v-model="uploadForm.ideaText" 
                                    rows="8" 
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"
                                    placeholder="请按照以下格式描述您的项目：&#10;&#10;【项目名称】&#10;项目简要描述&#10;&#10;【目标用户】&#10;谁会使用这个项目&#10;&#10;【核心功能】&#10;项目的主要功能点&#10;&#10;【技术方案】&#10;使用的技术栈和实现思路&#10;&#10;【项目亮点】&#10;项目的创新点和优势"></textarea>
                            </div>

                            <!-- 文件上传区域 -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-upload mr-2 text-blue-500"></i>上传项目文件
                                </label>
                                <p class="text-xs text-gray-500 mb-3">
                                    请上传以下提交物：代码文件、UI设计图、项目文档等
                                </p>
                                <div 
                                    @dragover.prevent
                                    @drop.prevent="handleFileDrop"
                                    class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-12 text-center cursor-pointer hover:border-blue-400 transition"
                                    :class="{'border-blue-500 bg-blue-50': isDragging}"
                                    @dragenter="isDragging = true"
                                    @dragleave="isDragging = false">
                                    
                                    <div v-if="selectedFiles.length === 0">
                                        <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                                        <p class="text-xl text-gray-600 mb-2">拖拽文件到此处或点击选择</p>
                                        <p class="text-gray-500 mb-3">支持 .zip, .tar.gz 压缩包或单个代码文件</p>
                                        <p class="text-xs text-gray-400 mb-4">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            建议上传压缩包或完整的项目文件夹
                                        </p>
                                        <input 
                                            ref="fileInput"
                                            @change="handleFileSelect"
                                            type="file" 
                                            multiple 
                                            class="hidden"
                                            accept=".py,.js,.ts,.tsx,.jsx,.java,.cpp,.c,.zip,.tar.gz">
                                        <button 
                                            type="button"
                                            @click="$refs.fileInput.click()"
                                            class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition shadow-md">
                                            <i class="fas fa-folder-open mr-2"></i>选择文件
                                        </button>
                                    </div>
                                    
                                    <div v-else>
                                        <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                                        <p class="text-xl text-green-600 mb-4">已选择 {{ selectedFiles.length }} 个文件</p>
                                        <div class="text-left bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto">
                                            <div v-for="file in selectedFiles" :key="file.name" class="flex items-center justify-between py-1">
                                                <span class="text-sm text-gray-700">{{ file.name }}</span>
                                                <span class="text-xs text-gray-500">{{ formatFileSize(file.size) }}</span>
                                            </div>
                                        </div>
                                        <button 
                                            type="button"
                                            @click="clearFiles"
                                            class="mt-4 text-red-500 hover:text-red-600">
                                            <i class="fas fa-times mr-1"></i>清除文件
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 提交按钮 -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                <p class="text-sm text-gray-600 mb-2">
                                    <i class="fas fa-info-circle text-blue-500 mr-1"></i>
                                    <strong>提交后AI将对您的项目进行评估，评估内容包括：</strong>
                                </p>
                                <ul class="text-xs text-gray-600 space-y-1">
                                    <li><i class="fas fa-check text-green-500 mr-2"></i>创意想法评估（创新性、可行性、学习价值）</li>
                                    <li><i class="fas fa-check text-green-500 mr-2"></i>UI设计分析（规范性、可用性、信息架构）</li>
                                    <li><i class="fas fa-check text-green-500 mr-2"></i>代码质量评审（正确性、可读性、架构、性能）</li>
                                </ul>
                            </div>
                            
                            <button 
                                type="submit"
                                :disabled="loading || selectedFiles.length === 0"
                                class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-8 rounded-lg font-semibold text-lg
                                       hover:from-blue-600 hover:to-purple-700 transition duration-300 disabled:opacity-50 shadow-lg">
                                <span v-if="loading">
                                    <i class="fas fa-spinner fa-spin mr-2"></i>AI正在评估中，请稍候...
                                </span>
                                <span v-else>
                                    <i class="fas fa-rocket mr-2"></i>提交作业进行评估
                                </span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- 学习记录模式 -->
                <div v-show="activeTab === 'history'" class="bg-white rounded-xl card-shadow p-8">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-history mr-2 text-orange-500"></i>学习记录
                        </h3>
                        
                        <!-- 筛选器 -->
                        <div class="flex flex-wrap gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">学生ID筛选</label>
                                <input 
                                    v-model="historyFilter.studentId" 
                                    type="text" 
                                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                    placeholder="输入学生ID筛选">
                            </div>
                            <div class="flex items-end">
                                <button 
                                    @click="loadHistory"
                                    :disabled="historyLoading"
                                    class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition disabled:opacity-50">
                                    <i class="fas fa-search mr-2" :class="{'fa-spin': historyLoading}"></i>
                                    {{ historyLoading ? '加载中...' : '查询' }}
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 历史记录列表 -->
                    <div v-if="historyData.length > 0">
                        <div class="space-y-4 max-h-96 overflow-y-auto">
                            <div 
                                v-for="record in filteredHistory" 
                                :key="record.assessment_id"
                                class="border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition"
                                @click="viewHistoryDetail(record)">
                                
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="flex items-center mb-2">
                                            <h4 class="font-semibold text-gray-800">{{ record.student_id }}</h4>
                                            <span 
                                                :class="getStatusBadgeClass(record.status)"
                                                class="ml-3 px-2 py-1 rounded-full text-xs font-medium">
                                                {{ getStatusText(record.status) }}
                                            </span>
                                            <span v-if="record.overall_score" class="ml-2 text-sm text-gray-600">
                                                分数: {{ record.overall_score.toFixed(1) }}
                                            </span>
                                        </div>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <i class="fas fa-clock mr-1"></i>
                                            <span>{{ formatDateTime(record.created_at) }}</span>
                                        </div>
                                    </div>
                                    <div class="ml-4">
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 空状态 -->
                    <div v-else-if="!historyLoading" class="text-center py-12">
                        <i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i>
                        <p class="text-xl text-gray-500 mb-2">暂无学习记录</p>
                        <p class="text-gray-400">请先完成入学诊断或提交作业</p>
                    </div>
                </div>
            </div>

            <!-- 评估结果显示 (集成路径推荐) - 只在学习记录标签页显示 -->
            <div v-if="assessmentResult && activeTab === 'history'" class="max-w-6xl mx-auto mt-16">
                <div class="result-card bg-white rounded-xl card-shadow overflow-hidden">
                    <!-- 结果头部 -->
                    <div class="bg-gradient-to-r text-white p-6" :class="assessmentResult.status === 'completed' ? 'from-green-500 to-blue-600' : 'from-yellow-500 to-orange-600'">
                        <h3 class="text-2xl font-bold mb-2">
                            <i class="mr-3" :class="assessmentResult.status === 'completed' ? 'fas fa-check-circle' : 'fas fa-spinner fa-spin'"></i>
                            {{ assessmentResult.status === 'completed' ? '作业评估完成' : '评估处理中...' }}
                        </h3>
                        <p class="opacity-90">评估ID: {{ assessmentResult.assessment_id }}</p>
                        <p v-if="assessmentResult.status === 'processing'" class="opacity-90 text-sm mt-2">
                            <i class="fas fa-info-circle mr-1"></i>AI正在对您的作业进行多维度分析，请稍候...
                        </p>
                        <button 
                            v-if="assessmentResult.status === 'processing'"
                            @click="checkAssessmentWithPath(assessmentResult.assessment_id, 1)"
                            class="mt-3 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-sm transition">
                            <i class="fas fa-sync mr-2"></i>手动刷新状态
                        </button>
                    </div>

                    <div class="p-8">
                        <!-- 评分概览 -->
                        <div v-if="assessmentResult.overall_score" class="mb-8">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">评估结果</h4>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <div class="text-center bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600">{{ assessmentResult.overall_score.toFixed(1) }}</div>
                                    <div class="text-gray-600 font-semibold">总分</div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                        <div class="bg-blue-500 h-2 rounded-full" :style="{width: assessmentResult.overall_score + '%'}"></div>
                                    </div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-purple-600">{{ (assessmentResult.breakdown?.idea || 0).toFixed(1) }}</div>
                                    <div class="text-gray-600 font-semibold">创意想法 (30%)</div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                        <div class="bg-purple-500 h-2 rounded-full" :style="{width: (assessmentResult.breakdown?.idea || 0) + '%'}"></div>
                                    </div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">{{ (assessmentResult.breakdown?.ui || 0).toFixed(1) }}</div>
                                    <div class="text-gray-600 font-semibold">UI设计 (30%)</div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                        <div class="bg-green-500 h-2 rounded-full" :style="{width: (assessmentResult.breakdown?.ui || 0) + '%'}"></div>
                                    </div>
                                </div>
                                <div class="text-center bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg">
                                    <div class="text-2xl font-bold text-orange-600">{{ (assessmentResult.breakdown?.code || 0).toFixed(1) }}</div>
                                    <div class="text-gray-600 font-semibold">代码质量 (40%)</div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                        <div class="bg-orange-500 h-2 rounded-full" :style="{width: (assessmentResult.breakdown?.code || 0) + '%'}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 详细子维度评分 -->
                        <div v-if="assessmentResult.breakdown && (assessmentResult.breakdown.idea_detail || assessmentResult.breakdown.ui_detail || assessmentResult.breakdown.code_detail)" class="mb-8">
                            <h4 class="text-xl font-semibold mb-6 text-gray-800">详细子维度评分</h4>
                            
                            <!-- 创意详细评分 -->
                            <div v-if="assessmentResult.breakdown.idea_detail" class="mb-6">
                                <h5 class="text-lg font-semibold text-purple-600 mb-3">🧠 创意想法详细评分</h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-purple-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-purple-600">{{ assessmentResult.breakdown.idea_detail.innovation || 0 }}</div>
                                        <div class="text-sm text-gray-600">创新性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-purple-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.idea_detail.innovation || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-purple-600">{{ assessmentResult.breakdown.idea_detail.feasibility || 0 }}</div>
                                        <div class="text-sm text-gray-600">可行性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-purple-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.idea_detail.feasibility || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-purple-600">{{ assessmentResult.breakdown.idea_detail.learning_value || 0 }}</div>
                                        <div class="text-sm text-gray-600">学习价值</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-purple-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.idea_detail.learning_value || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- UI详细评分 -->
                            <div v-if="assessmentResult.breakdown.ui_detail" class="mb-6">
                                <h5 class="text-lg font-semibold text-green-600 mb-3">🎨 UI设计详细评分</h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">{{ assessmentResult.breakdown.ui_detail.compliance || 0 }}</div>
                                        <div class="text-sm text-gray-600">规范性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-green-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.ui_detail.compliance || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">{{ assessmentResult.breakdown.ui_detail.usability || 0 }}</div>
                                        <div class="text-sm text-gray-600">可用性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-green-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.ui_detail.usability || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">{{ assessmentResult.breakdown.ui_detail.information_arch || 0 }}</div>
                                        <div class="text-sm text-gray-600">信息架构</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-green-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.ui_detail.information_arch || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 代码详细评分 -->
                            <div v-if="assessmentResult.breakdown.code_detail" class="mb-6">
                                <h5 class="text-lg font-semibold text-orange-600 mb-3">💻 代码质量详细评分</h5>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div class="bg-orange-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-orange-600">{{ assessmentResult.breakdown.code_detail.correctness || 0 }}</div>
                                        <div class="text-sm text-gray-600">正确性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-orange-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.code_detail.correctness || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-orange-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-orange-600">{{ assessmentResult.breakdown.code_detail.readability || 0 }}</div>
                                        <div class="text-sm text-gray-600">可读性</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-orange-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.code_detail.readability || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-orange-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-orange-600">{{ assessmentResult.breakdown.code_detail.architecture || 0 }}</div>
                                        <div class="text-sm text-gray-600">架构设计</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-orange-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.code_detail.architecture || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                    <div class="bg-orange-50 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-orange-600">{{ assessmentResult.breakdown.code_detail.performance || 0 }}</div>
                                        <div class="text-sm text-gray-600">性能</div>
                                        <div class="w-full bg-gray-200 rounded-full h-1 mt-1">
                                            <div class="bg-orange-500 h-1 rounded-full" :style="{width: (assessmentResult.breakdown.code_detail.performance || 0) + '%'}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 改进建议 -->
                        <div v-if="assessmentResult.diagnosis && assessmentResult.diagnosis.length" class="mb-8">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">
                                <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>改进建议
                            </h4>
                            <div class="space-y-4">
                                <div 
                                    v-for="(diag, index) in assessmentResult.diagnosis" 
                                    :key="index"
                                    class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                                    <div class="font-semibold text-yellow-800 mb-1">{{ diag.dimension || diag.dim }}</div>
                                    <div class="text-yellow-700 mb-2">{{ diag.issue }}</div>
                                    <div class="text-yellow-600 text-sm">
                                        <strong>建议:</strong> {{ diag.fix }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 学习资源 -->
                        <div v-if="assessmentResult.resources && assessmentResult.resources.length" class="mb-8">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">
                                <i class="fas fa-book mr-2 text-green-500"></i>推荐学习资源
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div 
                                    v-for="(resource, index) in assessmentResult.resources" 
                                    :key="index"
                                    class="bg-green-50 text-green-700 px-4 py-2 rounded-lg">
                                    <i class="fas fa-external-link-alt mr-2"></i>{{ resource }}
                                </div>
                            </div>
                        </div>

                        <!-- 准出规则 -->
                        <div v-if="assessmentResult.exit_rules" class="mb-6">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">
                                <i class="fas fa-flag mr-2"></i>评估状态
                            </h4>
                            <div class="p-4 rounded-lg" :class="assessmentResult.exit_rules.pass_status ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'">
                                <div class="flex items-center mb-2">
                                    <i :class="assessmentResult.exit_rules.pass_status ? 'fas fa-check-circle text-green-500' : 'fas fa-times-circle text-red-500'" class="mr-2"></i>
                                    <span class="font-semibold" :class="assessmentResult.exit_rules.pass_status ? 'text-green-700' : 'text-red-700'">
                                        {{ assessmentResult.exit_rules.pass_status ? '评估通过' : '需要改进' }}
                                    </span>
                                </div>
                                <div v-if="assessmentResult.exit_rules.remedy && assessmentResult.exit_rules.remedy.length" class="text-sm" :class="assessmentResult.exit_rules.pass_status ? 'text-green-600' : 'text-red-600'">
                                    <div v-for="(remedy, index) in assessmentResult.exit_rules.remedy" :key="index" class="mt-1">
                                        • {{ remedy }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🆕 路径推荐结果 -->
                        <div v-if="assessmentResult.path_recommendation" class="mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border border-indigo-200">
                            <h4 class="text-xl font-semibold mb-4 text-gray-800">
                                <i class="fas fa-route mr-2 text-indigo-600"></i>智能路径推荐
                            </h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">推荐决策：</span>
                                        <span :class="getDecisionClass(assessmentResult.path_recommendation.decision_type)">
                                            {{ getDecisionText(assessmentResult.path_recommendation.decision_type) }}
                                        </span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">推荐通道：</span>
                                        <span :class="getChannelClass(assessmentResult.path_recommendation.channel)">
                                            {{ assessmentResult.path_recommendation.channel }}通道
                                        </span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">下一节点：</span>
                                        <span class="text-blue-600 font-medium">{{ getNodeName(assessmentResult.path_recommendation.next_node_id) }}</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="mb-3">
                                        <span class="font-medium text-gray-700">推荐理由：</span>
                                        <p class="text-gray-600 text-sm mt-1">{{ assessmentResult.path_recommendation.reasoning }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 操作按钮 -->
                        <div class="flex gap-4">
                            <button 
                                @click="acceptPathRecommendation"
                                v-if="assessmentResult.path_recommendation"
                                class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition">
                                <i class="fas fa-check mr-2"></i>接受路径推荐
                            </button>
                            <button 
                                @click="viewLearningPath"
                                class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-map mr-2"></i>查看学习路径
                            </button>
                            <button 
                                @click="resetForm"
                                class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-plus mr-2"></i>提交新作业
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="bg-gray-800 text-white py-8 mt-16">
            <div class="container mx-auto px-6 text-center">
                <p>&copy; 2025 AI助教与个性化学习路径规划系统. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
